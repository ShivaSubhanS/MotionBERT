version: '3.8'

services:
  alphapose-motionbert:
    build:
      context: ..
      dockerfile: MotionBERT/Dockerfile
    image: alphapose-motionbert:cuda11.6
    container_name: alphapose-motionbert
    runtime: nvidia
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - NVIDIA_DRIVER_CAPABILITIES=compute,utility
    volumes:
      # Mount working directories (optional - for development)
      - ./results:/workspace/MotionBERT/results
      - ./smplx_output:/workspace/MotionBERT/smplx_output
      
    shm_size: '8gb'
    stdin_open: true
    tty: true
    working_dir: /workspace
